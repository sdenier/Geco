<html data-mustache="results_splits">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
{{#geco_AutoRefresh?}}
    <meta http-equiv="refresh" content="{{geco_RefreshInterval}}">
{{/geco_AutoRefresh?}}
    <style type="text/css">
      #gecoResults { font-size: 10 }
      #gecoResults h1 { font-size: 20; text-align: center }
      #gecoResultsh2 { font-size: 15 }
      #gecoResults table { border-collapse:collapse; width: 100%; font-size: 10 }
      #gecoResults .runner td, #gecoResults .runner th { padding: 0px 10px }
      #gecoResults .left { text-align: left }
      #gecoResults .center { text-align: center }
      #gecoResults .right, #gecoResults .time, #gecoResults .pace, #gecoResults .diff, #gecoResults .controls, #gecoResults .times, #gecoResults .splits { text-align: right }
      #gecoResults .diff, #gecoResults .splits { font-style: italic }
      #gecoResults .controls { background-color: #F0F0F0 }
      #gecoResults .times, #gecoResults .splits { background-color: white }
      #gecoResults .rsplit td, #gecoResults .col0 td, #gecoResults .col1 td { padding: 0 5px 0 0 }
      #gecoResults .rsplit td, #gecoResults .time, #gecoResults .best { font-weight: bold }
    </style>
  </head>
  <body>
    <h1>{{geco_StageTitle}} - {{i18n_SplitsTitle}}</h1>
	<div>
	<div id="gecoResults">
{{#geco_ResultsCollection}}
    <h2>{{geco_ResultName}} ({{geco_NbFinishedRunners}}/{{geco_NbPresentRunners}}){{#geco_SingleCourse?}} - {{geco_CourseLength}}m, {{geco_CourseClimb}}m{{/geco_SingleCourse?}}</h2>
    <table>
{{#geco_RankedRunners}}
      <tr class="rsplit"><td>{{geco_RunnerRank}}</td><td colspan="4">{{geco_RunnerFirstName}} {{geco_RunnerLastName}}</td><td>{{geco_RunnerResultTime}}</td></tr>
{{#geco_SplitRows}}
      <tr class="controls"><td></td>{{#geco_ControlRow}}<td>{{geco_ControlNum}} ({{geco_ControlCode}})</td>{{/geco_ControlRow}}</tr>
      <tr class="times"><td></td>{{#geco_TimeRow}}<td {{#geco_BestTime?}}class="best"{{/geco_BestTime?}}>{{geco_ControlTime}}</td>{{/geco_TimeRow}}</tr>
      <tr class="splits"><td></td>{{#geco_SplitRow}}<td {{#geco_BestSplit?}}class="best"{{/geco_BestSplit?}}>{{geco_SplitTime}}</td>{{/geco_SplitRow}}</tr>
{{/geco_SplitRows}}
{{/geco_RankedRunners}}
      <tr class="empty"><td>&nbsp;</td></tr>
{{#geco_UnrankedRunners}}
      <tr class="rsplit"><td>{{geco_RunnerRank}}</td><td colspan="4">{{geco_RunnerFirstName}} {{geco_RunnerLastName}}</td><td>{{geco_RunnerStatusOrTime}}</td></tr>
{{#geco_SplitRows}}
      <tr class="controls"><td></td>{{#geco_ControlRow}}<td>{{geco_ControlNum}} ({{geco_ControlCode}})</td>{{/geco_ControlRow}}</tr>
      <tr class="times"><td></td>{{#geco_TimeRow}}<td {{#geco_BestTime?}}class="best"{{/geco_BestTime?}}>{{geco_ControlTime}}</td>{{/geco_TimeRow}}</tr>
      <tr class="splits"><td></td>{{#geco_SplitRow}}<td {{#geco_BestSplit?}}class="best"{{/geco_BestSplit?}}>{{geco_SplitTime}}</td>{{/geco_SplitRow}}</tr>
{{/geco_SplitRows}}
{{/geco_UnrankedRunners}}
    </table>
{{#geco_PrintMode?}}
    <p>{{i18n_LastUpdateLabel}} {{geco_Timestamp}}</p>
{{/geco_PrintMode?}}
{{/geco_ResultsCollection}}
	</div>
	</div>
	<script id="gecoOrienteeringResults" type="text/javascript">
var gecoOrienteeringResults = {
  "version": 1,
  "circuits": [ {{#geco_ResultsCollection}} {
    "description": "{{geco_ResultName}} ({{geco_NbFinishedRunners}}/{{geco_NbPresentRunners}}) - {{geco_CourseLength}}m, {{geco_CourseClimb}}m",
    {{#geco_SingleCourse?}}"controls": [ {{#geco_CourseControls}}{{geco_ControlCode}}, {{/geco_CourseControls}} ],{{/geco_SingleCourse?}}
    "finishingRunnersCount": {{geco_NbFinishedRunners}}, "presentRunnersCount": {{geco_NbPresentRunners}},
    "rankedRunners": [ {{#geco_RankedRunners}} {
      "rank": "{{geco_RunnerRank}}", "status": "{{geco_RunnerStatus}}",
      "firstname": "{{geco_RunnerFirstName}}", "lastname": "{{geco_RunnerLastName}}",
      "category": "{{geco_RunnerCategory}}", "club": "{{geco_RunnerClubName}}",
      "splitTimes": [ {{#geco_RunnerSplits}}{{geco_SplitTimeMs}}, {{/geco_RunnerSplits}} ],
      "cumulatedTimes": [ {{#geco_RunnerSplits}}{{geco_ControlTimeMs}}, {{/geco_RunnerSplits}} ]},
    {{/geco_RankedRunners}}]},
{{/geco_ResultsCollection}}]};
window.addEventListener("message", function(event) {
    // We only accept messages from ourselves
    if (event.source != window)
      return;
    if(event.data.cmd==='getJson'){
        window.postMessage({cmd:'jsonResponse', data:gecoOrienteeringResults}, '*');
    }
}, false);
	</script>
  </body>
</html>
